<!DOCTYPE html>
<html lang="en">

<head>
  <link rel = "icon" type = "image/png" href = "logo/anyshare.png">
  <link rel="manifest" href="manifest.json">
  <script src="serviceworker.js"></script>
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-31PPT6CB61"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-31PPT6CB61');
  </script> -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>ShareCare</title>
  <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3403539919880614"
    crossorigin="anonymous"></script> -->
  <script>
   let isDropHereVisible = false;

window.addEventListener("dragover", function (e) {
  e.preventDefault();
  if (!isDropHereVisible) {
    document.querySelector(".Drop-here").style.display = "block";
    isDropHereVisible = true;
  }
});

window.addEventListener("drop", function (e) {
  e.preventDefault();
  document.querySelector(".Drop-here").style.display = "none";
  isDropHereVisible = false;
  if (e.dataTransfer.files.length > 0) {
    handleFiles(e.dataTransfer.files);
  }
});

window.addEventListener("dragenter", function (e) {
  e.preventDefault();
  if (!isDropHereVisible) {
    document.querySelector(".Drop-here").style.display = "block";
    isDropHereVisible = true;
  }
});

window.addEventListener("dragleave", function (e) {
  e.preventDefault();
  const dropHere = document.querySelector(".Drop-here");
  const rect = dropHere.getBoundingClientRect();
  const x = e.clientX;
  const y = e.clientY;
  const isOutside = x < rect.left || x > rect.right || y < rect.top || y > rect.bottom;
  const isLeftDocument = !document.elementFromPoint(x, y);
  if (isOutside || isLeftDocument) {
    dropHere.style.display = "none";
    isDropHereVisible = false;
  }
  // if (e.dataTransfer.files.length > 0) {
  //   handleFiles(e.dataTransfer.files);
  // }
});
function handleFiles(files) {
      // Handle dropped files here
      console.log(files);
      // Call the function to upload the file
      // uploadImage(files[0]);
      // set this file to the input element of the file input
      document.getElementById("file").files = files;
      uploadImage();
    }


  </script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const dropbox = document.querySelector(".dropbox");
      const fileInput = document.getElementById("file-input");
      const uploadButton = document.getElementById("upload-button");
  
      dropbox.addEventListener("dragover", handleDragOver);
      dropbox.addEventListener("dragleave", handleDragLeave);
      dropbox.addEventListener("drop", handleFileDrop);
      fileInput.addEventListener("change", handleFileUpload);
      uploadButton.addEventListener("click", handleFileUpload);
  
      function handleDragOver(event) {
        event.preventDefault();
        dropbox.classList.add("dragover");
      }
  
      function handleDragLeave(event) {
        event.preventDefault();
        dropbox.classList.remove("dragover");
      }
  
      function handleFileDrop(event) {
        event.preventDefault();
        dropbox.classList.remove("dragover");
        const file = event.dataTransfer.files[0];
        handleFile(file);
      }
  
      function handleFileUpload(event) {
        const file = fileInput.files[0];
        handleFile(file);
      }
  
      function handleFile(file) {
        if (file) {
          const maxSize = 100 * 1024 * 1024; // 100MB in bytes
          if (file.size <= maxSize) {
            console.log("File accepted:", file);
            // Perform further processing or upload the file here
          } else {
            console.log("File exceeds maximum size limit");
            // Display an error message or perform any required action for oversized files
          }
        }
      }
    });
  </script>
  <script src="https://www.gstatic.com/firebasejs/8.0.2/firebase.js"></script>
  <script src="script.js"></script>
  
</head>

<body>
 
  <div class="card">
    <h1>ShareCare</h1>
    <h3>It is a file sharing application that lets you upload and share a file from your PC or mobile device and send it quickly and easily to anyone on the internet.</h3>

    
    <center>
      <form method="post" action="/upload">
        <input type="text" id="ip1">
        <label class="file">
            Drop a file or click to select one
            <input type="file" multiple>
            <!-- use multiple, even if itâ€™s not allowed, to be able to show an info text -->
        </label>
        <button type="submit">Upload</button>
    </form>
      
    </center>
   
    

    
    

    <center>
      <div id="ShowUniqueID" hidden>
        <p>Unique ID</p><input type="text" id="showunique" value="23456" disabled></input>
      </div>
    </center>
    <!-- <br> -->
    <div class="Download" id="downloadiv">
      <h2>Receive File</h2>

      <input type="text" id="unique" placeholder="Enter Unique ID"><br>
      <center><button id="show" onclick="showimage()">Download<img id="downimg" src="download.png"
            alt="none" /></button>
    </div>
    </center>
  </div>
  <center>
    <div class="Drop-here">
      <h1 class="Drop-text">Drop Here</h1>
    </div>
  </center>
  
  
</body>
</html>



<!-- js for dropbox
//  $(document).ready(function() {
// 		$('input[type=file]').change(function() {
//       //console.log(this.files);
//       var f = this.files;
//       var el = $(this).parent();
//       if (f.length > 1) {
//           console.log(this.files, 1);
//           el.text('Sorry, multiple files are not allowed');
//           return;
//       }
//       // el.removeClass('focus');
//       el.html(f[0].name + '<br>' +
//           '<span class="sml">' +
//           'type: ' + f[0].type + ', ' +
//           Math.round(f[0].size / 1024) + ' KB</span>');
//   });

//   $('input[type=file]').on('focus', function() {
//       $(this).parent().addClass('focus');
//   });

//   $('input[type=file]').on('blur', function() {
//       $(this).parent().removeClass('focus');
//   });

// }); -->